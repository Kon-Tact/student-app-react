{"ast":null,"code":"import React,{useEffect,useState}from'react';import ApiAccess from'../services/api-access';import Student from'../models/Student';import Grid from'@mui/material/Grid/Grid';import Paper from'@mui/material/Paper/Paper';import Typography from'@mui/material/Typography/Typography';import TextField from'@mui/material/TextField/TextField';import Button from'@mui/material/Button/Button';import cookieServiceInstance from'../services/cookies';import routes from'../helpers/routes';import{useHistory}from'react-router-dom';import Loader from'../component/loader';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const StudentEdition=()=>{const[editStudentForm,setEditStudentForm]=useState({name:'',phoneNumber:'',email:'',address:''});const[editionStudent,setEditionStudent]=useState(new Student());const[loading,setLoading]=useState(false);const history=useHistory();const handleChange=e=>{const{name,value}=e.target;setEditStudentForm({...editStudentForm,[name]:value});};const handleSubmit=async e=>{setLoading(true);e.preventDefault();const student=new Student(editStudentForm.name,editStudentForm.phoneNumber,editStudentForm.email,editStudentForm.address);student.id=editionStudent.id;try{await ApiAccess.editStudent(student);}finally{setLoading(false);history.push(routes.home);}};useEffect(()=>{const storedStudent=cookieServiceInstance.getCookie('edition');if(storedStudent){setEditionStudent(JSON.parse(storedStudent));}},[]);useEffect(()=>{const fillForm=()=>{setEditStudentForm({name:editionStudent.name,phoneNumber:editionStudent.phoneNumber,email:editionStudent.email,address:editionStudent.address});};fillForm();},[editionStudent]);return/*#__PURE__*/_jsx(Grid,{container:true,justifyContent:\"center\",alignItems:\"top\",marginTop:3,style:{minHeight:'100vh'},children:/*#__PURE__*/_jsx(Grid,{item:true,xs:10,sm:6,md:4,children:/*#__PURE__*/_jsxs(Paper,{elevation:3,style:{padding:'20px'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",component:\"h2\",gutterBottom:true,children:\"Edition\"}),loading?/*#__PURE__*/_jsx(Loader,{}):/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(TextField,{label:\"Nom et pr\\xE9nom\",name:\"name\",value:editStudentForm.name,onChange:handleChange,fullWidth:true,margin:\"normal\",variant:\"standard\",required:true}),/*#__PURE__*/_jsx(TextField,{label:\"Num\\xE9ro de t\\xE9l\\xE9phone\",name:\"phoneNumber\",type:\"text\",value:editStudentForm.phoneNumber,onChange:handleChange,fullWidth:true,margin:\"normal\",variant:\"standard\",required:true}),/*#__PURE__*/_jsx(TextField,{label:\"Email\",name:\"email\",type:\"text\",value:editStudentForm.email,onChange:handleChange,fullWidth:true,margin:\"normal\",variant:\"standard\",required:true}),/*#__PURE__*/_jsx(TextField,{label:\"Adresse\",name:\"address\",type:\"text\",value:editStudentForm.address,onChange:handleChange,fullWidth:true,margin:\"normal\",variant:\"standard\",required:true}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",color:\"primary\",fullWidth:true,children:\"Mise \\xE0 jour\"})]})]})})});};export default StudentEdition;","map":{"version":3,"names":["React","useEffect","useState","ApiAccess","Student","Grid","Paper","Typography","TextField","Button","cookieServiceInstance","routes","useHistory","Loader","jsx","_jsx","jsxs","_jsxs","StudentEdition","editStudentForm","setEditStudentForm","name","phoneNumber","email","address","editionStudent","setEditionStudent","loading","setLoading","history","handleChange","e","value","target","handleSubmit","preventDefault","student","id","editStudent","push","home","storedStudent","getCookie","JSON","parse","fillForm","container","justifyContent","alignItems","marginTop","style","minHeight","children","item","xs","sm","md","elevation","padding","variant","component","gutterBottom","onSubmit","label","onChange","fullWidth","margin","required","type","color"],"sources":["C:/Users/GODINGEN MARIE/Documents/student-app-react/src/pages/student-edit-page.tsx"],"sourcesContent":["import React, { ChangeEvent, FunctionComponent, useEffect, useState } from 'react';\r\nimport ApiAccess from '../services/api-access';\r\nimport Student from '../models/Student';\r\nimport Grid from '@mui/material/Grid/Grid';\r\nimport Paper from '@mui/material/Paper/Paper';\r\nimport Typography from '@mui/material/Typography/Typography';\r\nimport TextField from '@mui/material/TextField/TextField';\r\nimport Button from '@mui/material/Button/Button';\r\nimport cookieServiceInstance from '../services/cookies';\r\nimport routes from '../helpers/routes';\r\nimport { useHistory } from 'react-router-dom';\r\nimport Loader from '../component/loader';\r\n\r\nconst StudentEdition: FunctionComponent = () => {\r\n\r\n    const [editStudentForm, setEditStudentForm] = useState({\r\n        name: '',\r\n        phoneNumber: '',\r\n        email: '',\r\n        address: ''\r\n    });\r\n\r\n    const [editionStudent, setEditionStudent] = useState(new Student());\r\n    const [loading, setLoading] = useState(false);\r\n    const history = useHistory();\r\n\r\n    const handleChange = (e: ChangeEvent<HTMLInputElement>) => {\r\n        const { name, value } = e.target;\r\n        setEditStudentForm({\r\n            ...editStudentForm,\r\n            [name]: value,\r\n        });\r\n    };\r\n\r\n    const handleSubmit = async (e: React.FormEvent<HTMLFormElement>) => {\r\n        setLoading(true);\r\n        e.preventDefault();\r\n        const student: Student = new Student(editStudentForm.name, editStudentForm.phoneNumber, editStudentForm.email, editStudentForm.address);\r\n        student.id = editionStudent.id;\r\n        try {\r\n            await ApiAccess.editStudent(student);\r\n        } finally {\r\n            setLoading(false);\r\n            history.push(routes.home);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        const storedStudent = cookieServiceInstance.getCookie('edition');\r\n        if (storedStudent) {\r\n            setEditionStudent(JSON.parse(storedStudent));\r\n        }\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        const fillForm = () => {\r\n            setEditStudentForm({\r\n                name: editionStudent.name,\r\n                phoneNumber: editionStudent.phoneNumber,\r\n                email: editionStudent.email,\r\n                address: editionStudent.address\r\n            });\r\n        };\r\n\r\n        fillForm();\r\n    }, [editionStudent]);\r\n\r\n\r\n\r\n    return (\r\n        <Grid container justifyContent=\"center\" alignItems=\"top\" marginTop={3} style={{ minHeight: '100vh' }}>\r\n            <Grid item xs={10} sm={6} md={4}>\r\n                <Paper elevation={3} style={{ padding: '20px' }}>\r\n\r\n                    <Typography variant=\"h5\" component=\"h2\" gutterBottom>\r\n                        Edition\r\n                    </Typography>\r\n                    {loading ? (\r\n                        <Loader />\r\n                    ) : (\r\n                        <form onSubmit={handleSubmit}>\r\n                            <TextField\r\n                                label=\"Nom et prénom\"\r\n                                name=\"name\"\r\n                                value={editStudentForm.name}\r\n                                onChange={handleChange}\r\n                                fullWidth\r\n                                margin=\"normal\"\r\n                                variant=\"standard\"\r\n                                required\r\n                            />\r\n                            <TextField\r\n                                label=\"Numéro de téléphone\"\r\n                                name=\"phoneNumber\"\r\n                                type=\"text\"\r\n                                value={editStudentForm.phoneNumber}\r\n                                onChange={handleChange}\r\n                                fullWidth\r\n                                margin=\"normal\"\r\n                                variant=\"standard\"\r\n                                required\r\n                            />\r\n                            <TextField\r\n                                label=\"Email\"\r\n                                name=\"email\"\r\n                                type=\"text\"\r\n                                value={editStudentForm.email}\r\n                                onChange={handleChange}\r\n                                fullWidth\r\n                                margin=\"normal\"\r\n                                variant=\"standard\"\r\n                                required\r\n                            />\r\n                            <TextField\r\n                                label=\"Adresse\"\r\n                                name=\"address\"\r\n                                type=\"text\"\r\n                                value={editStudentForm.address}\r\n                                onChange={handleChange}\r\n                                fullWidth\r\n                                margin=\"normal\"\r\n                                variant=\"standard\"\r\n                                required\r\n                            />\r\n                            <Button type=\"submit\" variant=\"contained\" color=\"primary\" fullWidth>\r\n                                Mise à jour\r\n                            </Button>\r\n                        </form>\r\n                    )}\r\n\r\n                </Paper>\r\n            </Grid>\r\n        </Grid>\r\n    );\r\n}\r\n\r\nexport default StudentEdition;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}