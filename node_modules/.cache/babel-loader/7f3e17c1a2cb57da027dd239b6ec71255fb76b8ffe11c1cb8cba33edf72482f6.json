{"ast":null,"code":"import React,{useState}from'react';import Student from'../models/Student';import Grid from'@mui/material/Grid/Grid';import Paper from'@mui/material/Paper/Paper';import Typography from'@mui/material/Typography/Typography';import TextField from'@mui/material/TextField/TextField';import Button from'@mui/material/Button/Button';import Loader from'../component/loader';import{useHistory}from'react-router-dom';import routes from'../helpers/routes';import{Stack}from'@mui/material';import DataAccess from'../services/data-access';import cookieServiceInstance from'../services/cookies';import library from'../helpers/library';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const StudentRegistration=()=>{const[loading,setLoading]=useState(false);const[testLoading,setTestLoading]=useState(false);const[studentRegistrationForm,setStudentRegistrationForm]=useState({name:'',phoneNumber:'',email:'',address:''});const handleChange=e=>{const{name,value}=e.target;setStudentRegistrationForm({...studentRegistrationForm,[name]:value});};const history=useHistory();const goToPage=path=>{history.push(path);};const handleSubmit=async e=>{e.preventDefault();setLoading(true);try{const connectedAccount=JSON.parse(cookieServiceInstance.getCookie(library.account));const toSaveStudent=new Student(studentRegistrationForm.name,studentRegistrationForm.phoneNumber,studentRegistrationForm.email,studentRegistrationForm.address,connectedAccount.role.includes('ADMIN'));console.log(toSaveStudent);//await ApiAccess.saveStudent(toSaveStudent);\n}finally{setLoading(false);goToPage(routes.home);}};const fillWithTestsValues=async()=>{setTestLoading(true);try{let testStudent=await DataAccess.getRandoDatas();testStudent.phoneNumber=\"06\"+Math.floor(Math.random()*10000000);console.log(testStudent.phoneNumber.length);testStudent.phoneNumber=testStudent.phoneNumber.length<10?testStudent.phoneNumber+'0':testStudent.phoneNumber;testStudent.email=testStudent.name.toLowerCase().replace(/\\s/g,'')+\"@email.com\";testStudent.address=String(Math.floor(Math.random()*30)+1)+\" \"+testStudent.address;setStudentRegistrationForm({name:testStudent.name,phoneNumber:testStudent.phoneNumber,email:testStudent.email,address:testStudent.address});}catch(error){console.log(error);}finally{setTestLoading(false);}};return/*#__PURE__*/_jsx(Grid,{container:true,justifyContent:\"center\",alignItems:\"top\",marginTop:3,style:{minHeight:'100vh'},children:/*#__PURE__*/_jsx(Grid,{item:true,xs:10,sm:6,md:4,children:/*#__PURE__*/_jsxs(Paper,{elevation:3,style:{padding:'20px'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",component:\"h2\",gutterBottom:true,children:\"Enregistrement \\xE9tudiant\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(TextField,{label:\"Nom et prenom\",name:\"name\",value:studentRegistrationForm.name,onChange:handleChange,fullWidth:true,margin:\"normal\",variant:\"standard\",required:true}),/*#__PURE__*/_jsx(TextField,{label:\"Numero de t\\xE9l\\xE9phone\",name:\"phoneNumber\",type:\"text\",value:studentRegistrationForm.phoneNumber,onChange:handleChange,fullWidth:true,margin:\"normal\",variant:\"standard\",required:true}),/*#__PURE__*/_jsx(TextField,{label:\"Email\",name:\"email\",type:\"text\",value:studentRegistrationForm.email,onChange:handleChange,fullWidth:true,margin:\"normal\",variant:\"standard\",required:true}),/*#__PURE__*/_jsx(TextField,{label:\"Adresse\",name:\"address\",type:\"text\",value:studentRegistrationForm.address,onChange:handleChange,fullWidth:true,margin:\"normal\",variant:\"standard\",required:true}),loading?/*#__PURE__*/_jsx(Loader,{}):/*#__PURE__*/_jsxs(Stack,{spacing:2,direction:\"row\",sx:{width:'100%'},children:[/*#__PURE__*/_jsx(Button,{type:\"button\",variant:\"contained\",color:\"primary\",sx:{flexGrow:1},onClick:()=>{goToPage(routes.home);},children:\"Retour\"}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",color:\"primary\",sx:{flexGrow:1},children:\"Enregistrer\"}),/*#__PURE__*/_jsx(Button,{type:\"button\",variant:\"contained\",color:\"primary\",sx:{flexGrow:1},onClick:fillWithTestsValues,children:testLoading?/*#__PURE__*/_jsx(Loader,{}):/*#__PURE__*/_jsx(_Fragment,{children:\"Test\"})})]})]})]})})});};export default StudentRegistration;","map":{"version":3,"names":["React","useState","Student","Grid","Paper","Typography","TextField","Button","Loader","useHistory","routes","Stack","DataAccess","cookieServiceInstance","library","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","StudentRegistration","loading","setLoading","testLoading","setTestLoading","studentRegistrationForm","setStudentRegistrationForm","name","phoneNumber","email","address","handleChange","e","value","target","history","goToPage","path","push","handleSubmit","preventDefault","connectedAccount","JSON","parse","getCookie","account","toSaveStudent","role","includes","console","log","home","fillWithTestsValues","testStudent","getRandoDatas","Math","floor","random","length","toLowerCase","replace","String","error","container","justifyContent","alignItems","marginTop","style","minHeight","children","item","xs","sm","md","elevation","padding","variant","component","gutterBottom","onSubmit","label","onChange","fullWidth","margin","required","type","spacing","direction","sx","width","color","flexGrow","onClick"],"sources":["C:/Users/GODINGEN MARIE/Documents/student-app-react/src/pages/student-register-page.tsx"],"sourcesContent":["import React, { ChangeEvent, FunctionComponent, useState } from 'react';\r\nimport ApiAccess from '../services/api-access';\r\nimport Student from '../models/Student';\r\nimport Grid from '@mui/material/Grid/Grid';\r\nimport Paper from '@mui/material/Paper/Paper';\r\nimport Typography from '@mui/material/Typography/Typography';\r\nimport TextField from '@mui/material/TextField/TextField';\r\nimport Button from '@mui/material/Button/Button';\r\nimport Loader from '../component/loader';\r\nimport { useHistory } from 'react-router-dom';\r\nimport routes from '../helpers/routes';\r\nimport { Stack } from '@mui/material';\r\nimport DataAccess from '../services/data-access';\r\nimport cookieServiceInstance from '../services/cookies';\r\nimport library from '../helpers/library';\r\nimport Account from '../models/Account';\r\nconst StudentRegistration: FunctionComponent = () => {\r\n\r\n    const [loading, setLoading] = useState(false);\r\n    const [testLoading, setTestLoading] = useState(false);\r\n    const [studentRegistrationForm, setStudentRegistrationForm] = useState({\r\n        name: '',\r\n        phoneNumber: '',\r\n        email: '',\r\n        address: ''\r\n    });\r\n    \r\n\r\n    const handleChange = (e: ChangeEvent<HTMLInputElement>) => {\r\n        const { name, value } = e.target;\r\n        setStudentRegistrationForm({\r\n            ...studentRegistrationForm,\r\n            [name]: value,\r\n        });\r\n    };\r\n\r\n    const history = useHistory();\r\n\r\n    const goToPage = (path: any) => {\r\n        history.push(path);\r\n    };\r\n\r\n    const handleSubmit = async (e: React.FormEvent<HTMLFormElement>) => {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n        try {\r\n            const connectedAccount: Account = JSON.parse(cookieServiceInstance.getCookie(library.account)!);\r\n            const toSaveStudent: Student = new Student(studentRegistrationForm.name, studentRegistrationForm.phoneNumber, studentRegistrationForm.email, studentRegistrationForm.address, connectedAccount.role.includes('ADMIN'));\r\n            console.log(toSaveStudent);\r\n            //await ApiAccess.saveStudent(toSaveStudent);\r\n        } finally {\r\n            setLoading(false);\r\n            goToPage(routes.home);\r\n        }\r\n\r\n    };\r\n\r\n    const fillWithTestsValues = async () => {\r\n        setTestLoading(true);\r\n        try {\r\n            let testStudent: Student = await DataAccess.getRandoDatas();\r\n            testStudent.phoneNumber = (\"06\" + Math.floor(Math.random() * 10000000));\r\n            console.log(testStudent.phoneNumber.length);\r\n            testStudent.phoneNumber = testStudent.phoneNumber.length < 10 ? testStudent.phoneNumber + '0' : testStudent.phoneNumber;\r\n            testStudent.email = testStudent.name.toLowerCase().replace(/\\s/g, '') + \"@email.com\";\r\n            testStudent.address = String(Math.floor(Math.random() * 30) + 1) + \" \" + testStudent.address;\r\n            setStudentRegistrationForm({ name: testStudent.name, phoneNumber: testStudent.phoneNumber, email: testStudent.email, address: testStudent.address });\r\n        } catch (error) {\r\n            console.log(error);\r\n        } finally {\r\n            setTestLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Grid container justifyContent=\"center\" alignItems=\"top\" marginTop={3} style={{ minHeight: '100vh' }}>\r\n            <Grid item xs={10} sm={6} md={4}>\r\n                <Paper elevation={3} style={{ padding: '20px' }}>\r\n                    <Typography variant=\"h5\" component=\"h2\" gutterBottom>\r\n                        Enregistrement étudiant\r\n                    </Typography>\r\n                    <form onSubmit={handleSubmit}>\r\n                        <TextField\r\n                            label=\"Nom et prenom\"\r\n                            name=\"name\"\r\n                            value={studentRegistrationForm.name}\r\n                            onChange={handleChange}\r\n                            fullWidth\r\n                            margin=\"normal\"\r\n                            variant=\"standard\"\r\n                            required\r\n                        />\r\n                        <TextField\r\n                            label=\"Numero de téléphone\"\r\n                            name=\"phoneNumber\"\r\n                            type=\"text\"\r\n                            value={studentRegistrationForm.phoneNumber}\r\n                            onChange={handleChange}\r\n                            fullWidth\r\n                            margin=\"normal\"\r\n                            variant=\"standard\"\r\n                            required\r\n                        />\r\n                        <TextField\r\n                            label=\"Email\"\r\n                            name=\"email\"\r\n                            type=\"text\"\r\n                            value={studentRegistrationForm.email}\r\n                            onChange={handleChange}\r\n                            fullWidth\r\n                            margin=\"normal\"\r\n                            variant=\"standard\"\r\n                            required\r\n                        />\r\n                        <TextField\r\n                            label=\"Adresse\"\r\n                            name=\"address\"\r\n                            type=\"text\"\r\n                            value={studentRegistrationForm.address}\r\n                            onChange={handleChange}\r\n                            fullWidth\r\n                            margin=\"normal\"\r\n                            variant=\"standard\"\r\n                            required\r\n                        />\r\n                        {loading ? (\r\n                            <Loader />\r\n                        ) : (\r\n                            <Stack spacing={2} direction=\"row\" sx={{ width: '100%' }}>\r\n                                <Button type='button' variant=\"contained\" color=\"primary\" sx={{ flexGrow: 1 }} onClick={() => { goToPage(routes.home) }}>\r\n                                    Retour\r\n                                </Button>\r\n                                <Button type=\"submit\" variant=\"contained\" color=\"primary\" sx={{ flexGrow: 1 }}>\r\n                                    Enregistrer\r\n                                </Button>\r\n                                <Button type='button' variant=\"contained\" color=\"primary\" sx={{ flexGrow: 1 }} onClick={fillWithTestsValues}>\r\n                                    {testLoading ? (\r\n                                        <Loader />\r\n                                    ) : (\r\n                                        <>\r\n                                            Test\r\n                                        </>\r\n                                    )}\r\n                                </Button>\r\n                            </Stack>\r\n                        )}\r\n\r\n                    </form>\r\n                </Paper>\r\n            </Grid>\r\n        </Grid>\r\n    );\r\n}\r\n\r\nexport default StudentRegistration;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}