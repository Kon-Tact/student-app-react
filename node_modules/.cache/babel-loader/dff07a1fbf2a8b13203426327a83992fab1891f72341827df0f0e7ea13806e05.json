{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\GODINGEN MARIE\\\\Documents\\\\student-app-react\\\\src\\\\pages\\\\register-page.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport ApiAccess from '../services/api-access';\nimport Grid from '@mui/material/Grid/Grid';\nimport Typography from '@mui/material/Typography/Typography';\nimport Paper from '@mui/material/Paper/Paper';\nimport TextField from '@mui/material/TextField/TextField';\nimport Button from '@mui/material/Button/Button';\nimport Credentials from '../models/Credentials';\nimport { useHistory } from 'react-router-dom';\nimport CloseIcon from '@mui/icons-material/Close';\nimport routes from '../helpers/routes';\nimport Loader from '../component/loader';\nimport ConnectManager from '../services/connexion';\nimport { IconButton, Snackbar } from '@mui/material';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst RegisterPage = () => {\n  _s();\n  const history = useHistory();\n  const [isErrorSnackOpen, setSnack] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [registerForm, setRegisterForm] = useState({\n    username: '',\n    password: '',\n    email: ''\n  });\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setRegisterForm({\n      ...registerForm,\n      [name]: value\n    });\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setLoading(true);\n    try {\n      //Saving the new account\n      await ApiAccess.saveAccount(new Credentials(registerForm.username, registerForm.password, registerForm.email));\n      try {\n        //Connecting the new account\n        const accountResponse = await ApiAccess.login(new Credentials(registerForm.username, registerForm.password));\n        ConnectManager.connection(accountResponse);\n      } catch (error) {\n        console.error('Bad credentials');\n        setSnack(true);\n      }\n    } catch (error) {\n      console.error(error);\n    } finally {\n      setLoading(false);\n      history.push(routes.home);\n      window.location.reload();\n    }\n  };\n  const closeSnack = () => {\n    setSnack(false);\n  };\n  const action = /*#__PURE__*/_jsxDEV(IconButton, {\n    size: \"small\",\n    \"aria-label\": \"close\",\n    color: \"inherit\",\n    onClick: closeSnack,\n    children: /*#__PURE__*/_jsxDEV(CloseIcon, {\n      fontSize: \"small\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 9\n  }, this);\n  return /*#__PURE__*/_jsxDEV(Grid, {\n    container: true,\n    justifyContent: \"center\",\n    alignItems: \"normal\",\n    marginTop: 5,\n    style: {\n      minHeight: '100vh'\n    },\n    children: /*#__PURE__*/_jsxDEV(Grid, {\n      item: true,\n      xs: 10,\n      sm: 6,\n      md: 6,\n      children: /*#__PURE__*/_jsxDEV(Paper, {\n        elevation: 4,\n        style: {\n          padding: '20px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h5\",\n          component: \"h2\",\n          gutterBottom: true,\n          children: \"Enregistrement\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Snackbar, {\n          anchorOrigin: {\n            vertical: 'bottom',\n            horizontal: 'center'\n          },\n          open: isErrorSnackOpen,\n          autoHideDuration: 3000,\n          onClose: closeSnack,\n          message: \"Une erreur a eu lieu lors de l'enregsitrement du compte\",\n          action: action\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 21\n        }, this), loading ? /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 25\n        }, this) : /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSubmit,\n          children: [/*#__PURE__*/_jsxDEV(TextField, {\n            label: \"Username\",\n            name: \"username\",\n            value: registerForm.username,\n            onChange: handleChange,\n            fullWidth: true,\n            margin: \"normal\",\n            variant: \"standard\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            label: \"Password\",\n            name: \"password\",\n            type: \"password\",\n            value: registerForm.password,\n            onChange: handleChange,\n            fullWidth: true,\n            margin: \"normal\",\n            variant: \"standard\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            label: \"Email\",\n            name: \"email\",\n            type: \"text\",\n            value: registerForm.email,\n            onChange: handleChange,\n            fullWidth: true,\n            margin: \"normal\",\n            variant: \"standard\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            type: \"submit\",\n            variant: \"contained\",\n            color: \"primary\",\n            fullWidth: true,\n            children: \"S'enregistrer\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 9\n  }, this);\n};\n_s(RegisterPage, \"vp2xTChfSCKING4kLSJI5X2TR4s=\", false, function () {\n  return [useHistory];\n});\n_c = RegisterPage;\nexport default RegisterPage;\nvar _c;\n$RefreshReg$(_c, \"RegisterPage\");","map":{"version":3,"names":["React","useState","ApiAccess","Grid","Typography","Paper","TextField","Button","Credentials","useHistory","CloseIcon","routes","Loader","ConnectManager","IconButton","Snackbar","jsxDEV","_jsxDEV","RegisterPage","_s","history","isErrorSnackOpen","setSnack","loading","setLoading","registerForm","setRegisterForm","username","password","email","handleChange","e","name","value","target","handleSubmit","preventDefault","saveAccount","accountResponse","login","connection","error","console","push","home","window","location","reload","closeSnack","action","size","color","onClick","children","fontSize","fileName","_jsxFileName","lineNumber","columnNumber","container","justifyContent","alignItems","marginTop","style","minHeight","item","xs","sm","md","elevation","padding","variant","component","gutterBottom","anchorOrigin","vertical","horizontal","open","autoHideDuration","onClose","message","onSubmit","label","onChange","fullWidth","margin","required","type","_c","$RefreshReg$"],"sources":["C:/Users/GODINGEN MARIE/Documents/student-app-react/src/pages/register-page.tsx"],"sourcesContent":["import React, { ChangeEvent, FunctionComponent, useState } from 'react';\r\nimport ApiAccess from '../services/api-access';\r\nimport Grid from '@mui/material/Grid/Grid';\r\nimport Typography from '@mui/material/Typography/Typography';\r\nimport Paper from '@mui/material/Paper/Paper';\r\nimport TextField from '@mui/material/TextField/TextField';\r\nimport Button from '@mui/material/Button/Button';\r\nimport Credentials from '../models/Credentials';\r\nimport AccountResponse from '../models/AccountResponse';\r\nimport { useHistory } from 'react-router-dom';\r\nimport CloseIcon from '@mui/icons-material/Close';\r\nimport routes from '../helpers/routes';\r\nimport Loader from '../component/loader';\r\nimport ConnectManager from '../services/connexion';\r\nimport { IconButton, Snackbar } from '@mui/material';\r\n\r\nconst RegisterPage: FunctionComponent = () => {\r\n    const history = useHistory();\r\n    const [isErrorSnackOpen, setSnack] = useState(false);\r\n    const [loading, setLoading] = useState(false);\r\n    const [registerForm, setRegisterForm] = useState({\r\n        username: '',\r\n        password: '',\r\n        email: ''\r\n    });\r\n\r\n    const handleChange = (e: ChangeEvent<HTMLInputElement>) => {\r\n        const { name, value } = e.target;\r\n        setRegisterForm({\r\n            ...registerForm,\r\n            [name]: value,\r\n        });\r\n    };\r\n\r\n    const handleSubmit = async (e: React.FormEvent<HTMLFormElement>) => {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n        try {\r\n            //Saving the new account\r\n            await ApiAccess.saveAccount(new Credentials(registerForm.username, registerForm.password, registerForm.email));\r\n            try {\r\n                //Connecting the new account\r\n                const accountResponse: AccountResponse = await ApiAccess.login(new Credentials(registerForm.username, registerForm.password));\r\n                ConnectManager.connection(accountResponse);\r\n            } catch (error) {\r\n                console.error('Bad credentials');\r\n                setSnack(true);\r\n            }\r\n        } catch (error) {\r\n            console.error(error);\r\n        } finally {\r\n            setLoading(false);\r\n            history.push(routes.home);\r\n            window.location.reload();\r\n        }\r\n    };\r\n\r\n    const closeSnack = () => {\r\n        setSnack(false);\r\n    }\r\n\r\n    const action = (\r\n        <IconButton\r\n            size=\"small\"\r\n            aria-label=\"close\"\r\n            color=\"inherit\"\r\n            onClick={closeSnack}\r\n        >\r\n            <CloseIcon fontSize=\"small\" />\r\n        </IconButton>\r\n    );\r\n\r\n    return (\r\n        <Grid container justifyContent=\"center\" alignItems=\"normal\" marginTop={5} style={{ minHeight: '100vh' }}>\r\n            <Grid item xs={10} sm={6} md={6}>\r\n                <Paper elevation={4} style={{ padding: '20px' }}>\r\n                    <Typography variant=\"h5\" component=\"h2\" gutterBottom>\r\n                        Enregistrement\r\n                    </Typography>\r\n                    <Snackbar\r\n                        anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\r\n                        open={isErrorSnackOpen}\r\n                        autoHideDuration={3000}\r\n                        onClose={closeSnack}\r\n                        message=\"Une erreur a eu lieu lors de l'enregsitrement du compte\"\r\n                        action={action}\r\n                    />\r\n                    {loading ? (\r\n                        <Loader />\r\n                    ) : (\r\n                        <form onSubmit={handleSubmit}>\r\n                            <TextField\r\n                                label=\"Username\"\r\n                                name=\"username\"\r\n                                value={registerForm.username}\r\n                                onChange={handleChange}\r\n                                fullWidth\r\n                                margin=\"normal\"\r\n                                variant=\"standard\"\r\n                                required\r\n                            />\r\n                            <TextField\r\n                                label=\"Password\"\r\n                                name=\"password\"\r\n                                type=\"password\"\r\n                                value={registerForm.password}\r\n                                onChange={handleChange}\r\n                                fullWidth\r\n                                margin=\"normal\"\r\n                                variant=\"standard\"\r\n                                required\r\n                            />\r\n                            <TextField\r\n                                label=\"Email\"\r\n                                name=\"email\"\r\n                                type=\"text\"\r\n                                value={registerForm.email}\r\n                                onChange={handleChange}\r\n                                fullWidth\r\n                                margin=\"normal\"\r\n                                variant=\"standard\"\r\n                                required\r\n                            />\r\n                            <Button type=\"submit\" variant=\"contained\" color=\"primary\" fullWidth>\r\n                                S'enregistrer\r\n                            </Button>\r\n                        </form>\r\n                    )}\r\n\r\n                </Paper>\r\n            </Grid>\r\n        </Grid>\r\n    );\r\n}\r\n\r\nexport default RegisterPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}