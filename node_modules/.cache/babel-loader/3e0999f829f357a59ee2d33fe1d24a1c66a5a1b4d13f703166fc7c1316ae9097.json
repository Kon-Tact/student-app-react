{"ast":null,"code":"import React,{useState}from'react';import ApiAccess from'../services/api-access';import Grid from'@mui/material/Grid/Grid';import Typography from'@mui/material/Typography/Typography';import Paper from'@mui/material/Paper/Paper';import TextField from'@mui/material/TextField/TextField';import Button from'@mui/material/Button/Button';import{IconButton,Snackbar}from'@mui/material';import Loader from'../component/loader';import CloseIcon from'@mui/icons-material/Close';import cookieServiceInstance from'../services/cookies';import library from'../helpers/library';import{useHistory}from'react-router-dom';import routes from'../helpers/routes';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProfilEdition=()=>{const[isAccountMaj,setSnackMaj]=useState(false);const[loading,setLoading]=useState(false);const history=useHistory();const connectedValue=data=>{const account=JSON.parse(cookieServiceInstance.getCookie(library.account));switch(data){case library.username:return account.username;case library.email:return account.email;default:return'';}};const[profilEditionForm,setProfilEditionForm]=useState({username:connectedValue(library.account),password:'',email:connectedValue(library.email)});const handleChange=e=>{const{name,value}=e.target;setProfilEditionForm({...profilEditionForm,[name]:value});};const handleSubmit=async e=>{e.preventDefault();setLoading(true);try{let account=JSON.parse(cookieServiceInstance.getCookie(library.account));const updatedAccount={...account,username:profilEditionForm.username,password:profilEditionForm.password,email:profilEditionForm.email};account=await ApiAccess.editAccount(updatedAccount);}catch(error){console.error(error);}finally{history.push(routes.home);}};const closeSnack=()=>{setSnackMaj(false);};const action=/*#__PURE__*/_jsx(IconButton,{size:\"small\",\"aria-label\":\"close\",color:\"inherit\",onClick:closeSnack,children:/*#__PURE__*/_jsx(CloseIcon,{fontSize:\"small\"})});return/*#__PURE__*/_jsx(Grid,{container:true,justifyContent:\"center\",alignItems:\"top\",marginTop:3,style:{minHeight:'100vh'},children:/*#__PURE__*/_jsx(Grid,{item:true,xs:10,sm:6,md:4,children:/*#__PURE__*/_jsxs(Paper,{elevation:3,style:{padding:'20px'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",component:\"h2\",gutterBottom:true,children:\"Mise a jour du profil\"}),/*#__PURE__*/_jsx(Snackbar,{anchorOrigin:{vertical:'bottom',horizontal:'center'},open:isAccountMaj,autoHideDuration:3000,onClose:closeSnack,message:\"Compte mis a jour\",action:action}),loading?/*#__PURE__*/_jsx(Loader,{}):/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(TextField,{label:\"Username\",name:\"username\",value:profilEditionForm.username,onChange:handleChange,fullWidth:true,margin:\"normal\",variant:\"standard\"}),/*#__PURE__*/_jsx(TextField,{label:\"Password\",name:\"password\",type:\"password\",value:profilEditionForm.password,onChange:handleChange,fullWidth:true,margin:\"normal\",variant:\"standard\"}),/*#__PURE__*/_jsx(TextField,{label:\"Email\",name:\"email\",type:\"text\",value:profilEditionForm.email,onChange:handleChange,fullWidth:true,margin:\"normal\",variant:\"standard\"}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",color:\"primary\",fullWidth:true,children:\"Editer\"})]})]})})});};export default ProfilEdition;","map":{"version":3,"names":["React","useState","ApiAccess","Grid","Typography","Paper","TextField","Button","IconButton","Snackbar","Loader","CloseIcon","cookieServiceInstance","library","useHistory","routes","jsx","_jsx","jsxs","_jsxs","ProfilEdition","isAccountMaj","setSnackMaj","loading","setLoading","history","connectedValue","data","account","JSON","parse","getCookie","username","email","profilEditionForm","setProfilEditionForm","password","handleChange","e","name","value","target","handleSubmit","preventDefault","updatedAccount","editAccount","error","console","push","home","closeSnack","action","size","color","onClick","children","fontSize","container","justifyContent","alignItems","marginTop","style","minHeight","item","xs","sm","md","elevation","padding","variant","component","gutterBottom","anchorOrigin","vertical","horizontal","open","autoHideDuration","onClose","message","onSubmit","label","onChange","fullWidth","margin","type"],"sources":["C:/Users/GODINGEN MARIE/Documents/student-app-react/src/pages/profil-edition-page.tsx"],"sourcesContent":["import React, { ChangeEvent, FunctionComponent, useState } from 'react';\r\nimport ApiAccess from '../services/api-access';\r\nimport Account from '../models/Account';\r\nimport Grid from '@mui/material/Grid/Grid';\r\nimport Typography from '@mui/material/Typography/Typography';\r\nimport Paper from '@mui/material/Paper/Paper';\r\nimport TextField from '@mui/material/TextField/TextField';\r\nimport Button from '@mui/material/Button/Button';\r\nimport { IconButton, Snackbar } from '@mui/material';\r\nimport Loader from '../component/loader';\r\nimport CloseIcon from '@mui/icons-material/Close';\r\nimport cookieServiceInstance from '../services/cookies';\r\nimport library from '../helpers/library';\r\nimport { useHistory } from 'react-router-dom';\r\nimport routes from '../helpers/routes';\r\n\r\nconst ProfilEdition: FunctionComponent = () => {\r\n\r\n    const [isAccountMaj, setSnackMaj] = useState(false);\r\n    const [loading, setLoading] = useState(false);\r\n    const history = useHistory();\r\n    const connectedValue = (data: string): string => {\r\n        const account: Account = JSON.parse(cookieServiceInstance.getCookie(library.account)!);\r\n        switch (data) {\r\n            case library.username: return account.username;\r\n            case library.email: return account.email;\r\n            default : return '';\r\n        }\r\n    }\r\n\r\n    const [profilEditionForm, setProfilEditionForm] = useState({   \r\n        username: connectedValue(library.account),\r\n        password: '',\r\n        email: connectedValue(library.email)\r\n    });\r\n\r\n    const handleChange = (e: ChangeEvent<HTMLInputElement>) => {\r\n        const { name, value } = e.target;\r\n        setProfilEditionForm({\r\n            ...profilEditionForm,\r\n            [name]: value,\r\n        });\r\n    };\r\n\r\n    const handleSubmit = async (e: React.FormEvent<HTMLFormElement>) => {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n        try {\r\n            let account: Account = JSON.parse(cookieServiceInstance.getCookie(library.account)!);\r\n            const updatedAccount = { ...account, username: profilEditionForm.username, password: profilEditionForm.password, email: profilEditionForm.email};\r\n            account = await ApiAccess.editAccount(updatedAccount);\r\n        } catch (error) {\r\n            console.error(error);\r\n        } finally {\r\n            history.push(routes.home);\r\n        }\r\n    };\r\n\r\n    const closeSnack = () => {\r\n        setSnackMaj(false);\r\n    }\r\n\r\n    const action = (\r\n        <IconButton\r\n            size=\"small\"\r\n            aria-label=\"close\"\r\n            color=\"inherit\"\r\n            onClick={closeSnack}\r\n        >\r\n            <CloseIcon fontSize=\"small\" />\r\n        </IconButton>\r\n    );\r\n\r\n    return (\r\n        <Grid container justifyContent=\"center\" alignItems=\"top\" marginTop={3} style={{ minHeight: '100vh' }}>\r\n            <Grid item xs={10} sm={6} md={4}>\r\n                <Paper elevation={3} style={{ padding: '20px' }}>\r\n                    <Typography variant=\"h5\" component=\"h2\" gutterBottom>\r\n                        Mise a jour du profil\r\n                    </Typography>\r\n                    <Snackbar\r\n                        anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\r\n                        open={isAccountMaj}\r\n                        autoHideDuration={3000}\r\n                        onClose={closeSnack}\r\n                        message=\"Compte mis a jour\"\r\n                        action={action}\r\n                    />\r\n                    {loading ? (\r\n                        <Loader />\r\n                    ) : (\r\n                        <form onSubmit={handleSubmit}>\r\n                            <TextField\r\n                                label=\"Username\"\r\n                                name=\"username\"\r\n                                value={profilEditionForm.username}\r\n                                onChange={handleChange}\r\n                                fullWidth\r\n                                margin=\"normal\"\r\n                                variant=\"standard\"\r\n                            />\r\n                            <TextField\r\n                                label=\"Password\"\r\n                                name=\"password\"\r\n                                type=\"password\"\r\n                                value={profilEditionForm.password}\r\n                                onChange={handleChange}\r\n                                fullWidth\r\n                                margin=\"normal\"\r\n                                variant=\"standard\"\r\n                            />\r\n                            <TextField\r\n                                label=\"Email\"\r\n                                name=\"email\"\r\n                                type=\"text\"\r\n                                value={profilEditionForm.email}\r\n                                onChange={handleChange}\r\n                                fullWidth\r\n                                margin=\"normal\"\r\n                                variant=\"standard\"\r\n                            />\r\n                            <Button type=\"submit\" variant=\"contained\" color=\"primary\" fullWidth>\r\n                                Editer\r\n                            </Button>\r\n                        </form>\r\n                    )}\r\n                </Paper>\r\n            </Grid>\r\n        </Grid>\r\n    );\r\n}\r\n\r\nexport default ProfilEdition;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}